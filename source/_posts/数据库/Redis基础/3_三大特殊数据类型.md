---
title: 3_Redis的三大特殊数据类型
date: 2023-1-4
description: 2023年初。我开始学习Redis！开始了NoSQL的学习！
tags:
  - 学习
categories: Redis基础
---

# 一、Geospatial： 地理位置

城市经纬度查询： 经纬度查询
注意点1：两极无法直接添加，我们一般会下载城市数据，直接通过java程序一次性导入！
注意点2：有效的经度从-180度到180度。
注意点3：有效的纬度从-85.05112878度到85.05112878度。
注意点4：m 为米。km 为千米。mi 为英里。ft 为英尺。

1. geoadd（添加）、geopos（查看）、geodist（计算距离）操作

2. georadius（查询附近位置）操作

3. georadiusbymember （查找指定元素指定范围内的元素）、geohash （返回经纬度的hash值）、zrange、zrem（使用zset命令操作geo）

4. 小结

   实际需求中，我们可以用来查询附近的人、计算两人之间的距离等。当然，那些所需的经纬度我们肯定要结合java代码来一次导入，手动查询和录入太过于浪费时间

# 二、Hyperloglog： 基数

什么是基数？
再数学层面上可以说是：两个数据集中不重复的元素~
但是再Redis中，可能会有一定的误差性。 官方给出的误差率是0.81%。
Hyperloglog的优点： 占用的内存是固定的，2^64个元素，相当于只需要12kb的内存即可。效率极高！

1. pfadd（添加数据集）、pfcount（统计数据集）、pfmegre（合并数据集-自动去重）

2. 小结

   如果在实际业务中，允许一定的误差值，我们可以使用基数统计来计算~效率非常高！比如：网站的访问量，就可以利用**Hyperloglog**来进行计算统计

# 三、Bitmap：位存储

Bitmap 位图，数据结构！ 都是操作二进制位来进行记录，就只有0 和 1 两个状态！

1. setbit（添加）、getset（获取）、bitcount（统计）操作

2. 小结

   实际需求中，可能需要我们统计用户的登陆信息，员工的打卡信息等等。只要是事务的只有**两个状态**的，我们都可以用Bitmap来进行操作